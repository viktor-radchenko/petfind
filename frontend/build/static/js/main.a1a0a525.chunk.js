(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{28:function(e,t,a){},31:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a(1),n=a.n(c),l=a(19),r=a.n(l),i=(a(28),a(5)),o=a(2),j=a(3),u=a(11),b=a.n(u),d=a(13),m=a(20),h=Object(m.createAuthProvider)({accessTokenKey:"access_token",onUpdateToken:function(e){return fetch("/api/auth/refresh",{method:"POST",body:e.access_token}).then((function(e){return e.json()}))}}),p=Object(j.a)(h,4),O=p[0],x=p[1],g=p[2],_=p[3],f=function(){var e=Object(d.a)(b.a.mark((function e(t,a,s,c,n,l,r,i,o,j,u,d){var m;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(m=new FormData).append("tagId",t.toUpperCase()),m.append("tagName",a),m.append("tagImage",s),m.append("firstName",c),m.append("lastName",n),m.append("phone",l),m.append("email",r),m.append("address",i),m.append("city",o),m.append("country",j),m.append("zipCode",u),m.append("userState",d),e.next=15,fetch("/api/auth/register",{method:"POST",body:m});case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t,a,s,c,n,l,r,i,o,j,u,b){return e.apply(this,arguments)}}();a(31);var N=function(){var e=O(),t=Object(j.a)(e,1)[0];return Object(s.jsx)("div",{className:"header",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("div",{className:"header__inner",children:Object(s.jsx)("nav",{className:"menu",children:Object(s.jsxs)("ul",{className:"menu__list",children:[Object(s.jsx)("li",{className:"menu__item",children:Object(s.jsx)(i.b,{className:"menu__link",to:"/",children:"Home"})}),Object(s.jsx)("li",{className:"menu__item",children:Object(s.jsx)(i.b,{className:"menu__link",to:"/register_tag",children:"Register Tag"})}),Object(s.jsx)("li",{className:"menu__item",children:Object(s.jsx)(i.b,{className:"menu__link",to:"/contact",children:"Contact"})}),t?Object(s.jsx)("li",{className:"menu__item",children:Object(s.jsx)(i.b,{className:"menu__link",to:"/dashboard",children:"Dashboard"})}):Object(s.jsx)("li",{className:"menu__item",children:Object(s.jsx)(i.b,{className:"menu__link",to:"/login",children:"Login"})})]})})})})})};var v=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){fetch("/api").then((function(e){return e.json()})).then((function(e){return n(e.message)}))}),[]),Object(s.jsx)("section",{className:"home",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("div",{className:"home__inner",children:Object(s.jsx)("h2",{children:a})})})})};var y=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1],l=Object(c.useState)(""),r=Object(j.a)(l,2),u=r[0],b=r[1],d=O(),m=Object(j.a)(d,1)[0],h=Object(o.g)();if(m){h.push("/")}return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"full-logo",children:Object(s.jsx)("img",{src:"images/logo.png",alt:"full logo"})}),Object(s.jsxs)("div",{className:"auth",children:[Object(s.jsx)("span",{className:"auth__subtitle",children:"Welcome back!"}),Object(s.jsx)("span",{className:"title auth__title",children:"Login your account"}),Object(s.jsxs)("form",{className:"auth__form",action:"#",children:[Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"Email Address"}),Object(s.jsx)("input",{className:"input auth__input",type:"email",onChange:function(e){n(e.target.value)},value:a})]}),Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"Password"}),Object(s.jsx)("input",{className:"input auth__input",type:"password",onChange:function(e){b(e.target.value)},value:u})]}),Object(s.jsxs)("div",{className:"auth__password",children:[Object(s.jsxs)("label",{className:"label auth__label",children:[Object(s.jsx)("input",{className:"input auth__input-checkbox",type:"checkbox"}),Object(s.jsx)("span",{className:"auth__checkbox"}),Object(s.jsx)("span",{children:"Remember me"})]}),Object(s.jsx)(i.b,{className:"auth__forgot",to:"/forgot-password",children:"Forgot your password?"})]}),Object(s.jsx)("button",{className:"button",type:"submit",onClick:function(e){e.preventDefault(),console.log("You pressed login");var t={username:a,password:u};console.log(t),fetch("/api/auth/login",{method:"post",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(!e.ok)throw new Error(e.message);e.access_token?(g(e),console.log(e)):console.log("Please type in correct username/password")})).catch((function(e){return console.log(e)}))},children:"Login"}),Object(s.jsxs)("span",{className:"auth__sign-up",children:["No account yet?"," ",Object(s.jsx)(i.b,{className:"auth__forgot",to:"/register",children:"Sign up"})]})]})]})]})};a(40);var C=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){x("/api/protected").then((function(e){return 401===e.status?(n("Sorry you aren't authorized!"),null):e.json()})).then((function(e){e&&e.message&&n(e.message)}))}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("h2",{children:["Dasboard: ",a]}),Object(s.jsx)("button",{onClick:function(){return _()},children:"Logout"})]})};var k=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1],l=Object(c.useState)(""),r=Object(j.a)(l,2),u=r[0],b=r[1],d=Object(o.h)().token,m=O(),h=Object(j.a)(m,1)[0],p=Object(o.g)();if(h){p.push("/")}return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("section",{className:"set-password",children:[Object(s.jsx)("span",{className:"title auth__title",children:"Set Your Password"}),Object(s.jsxs)("form",{className:"auth__form",action:"#",children:[Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"Old Password"}),Object(s.jsx)("input",{className:"input auth__input",type:"password",onChange:function(e){n(e.target.value)},value:a})]}),Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"New Password"}),Object(s.jsx)("input",{className:"input auth__input",type:"password",onChange:function(e){b(e.target.value)},value:u})]}),Object(s.jsx)("button",{className:"button set-password__btn",type:"submit",onClick:function(e){e.preventDefault(),console.log("You pressed submit passwords");var t={oldPassword:a,newPassword:u,token:d};console.log(t),fetch("/api/auth/verify",{method:"post",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e.access_token?(g(e),console.log(e)):console.log("Please check if your passwords are correct password")}))},children:"Change Password"})]})]}),Object(s.jsx)("div",{classN:"go-home",children:Object(s.jsx)("small",{children:Object(s.jsx)(i.b,{classN:"go-home__link",to:"/",children:"Cancel  and back to home"})})})]})},w=a(14),I=a(10),S={tagIdMessage:"",tagIdIsValid:!1,currentStep:1,tagId:"",tagName:"",tagImage:null,firstName:"",lastName:"",phone:"",email:"",address:"",city:"",country:"",zipCode:"",userState:""};function P(e,t){var a=t.field,s=t.value;return Object(I.a)(Object(I.a)({},e),{},Object(w.a)({},a,s))}var A=function(){var e=Object(c.useReducer)(P,S),t=Object(j.a)(e,2),a=t[0],n=t[1];console.log(a);var l=a.tagIdMessage,r=a.tagIdIsValid,o=a.currentStep,u=a.tagId,m=a.tagName,h=a.tagImage,p=a.firstName,O=a.lastName,x=a.phone,g=a.email,_=a.address,N=a.city,v=a.country,y=a.zipCode,C=a.userState,k=function(e){n({field:e.target.name,value:e.target.value})};return Object(c.useEffect)((function(){6===u.length?function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/tag-id-lookup/".concat(u.toUpperCase())).then((function(e){return e.json()})).then((function(e){return e.message}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){n({field:"tagIdMessage",value:e}),"Confirmed"===e&&(console.log("".concat(e," is confirmed")),n({field:"tagIdIsValid",value:!0}))})):(n({field:"tagIdIsValid",value:!1}),n({field:"tagIdMessage",value:""}))}),[u]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"full-logo",children:Object(s.jsx)("img",{src:"images/logo.png",alt:"full logo"})}),Object(s.jsxs)("ul",{className:"breadcrumbs",children:[Object(s.jsx)("li",{className:"breadcrumbs__item breadcrumbs__item--active",children:"Register item"}),Object(s.jsx)("li",{className:"breadcrumbs__item",children:"Create Account"})]}),1===o&&Object(s.jsxs)("section",{className:"register-item",children:[Object(s.jsxs)("span",{className:"steps",children:["step ",o," / 2"]}),Object(s.jsx)("span",{className:"title register-item__title",children:"Register Item"}),Object(s.jsx)("span",{className:"register-item__subtitle",children:"Add basic details about the item"}),Object(s.jsxs)("form",{className:"register-item__form",action:"#",autoComplete:"off",children:[Object(s.jsxs)("div",{className:"register-item__box",children:[Object(s.jsxs)("div",{className:"register-item__img",children:[Object(s.jsx)("span",{children:"Add an Image"}),Object(s.jsx)("img",{src:"images/icons/add-photo.svg",alt:"img"})]}),Object(s.jsxs)("label",{className:"register-item__label",children:[Object(s.jsx)("input",{className:"register-item__file",type:"file",accept:"image/*",name:"tagImage",onChange:function(e){n({field:e.target.name,value:e.target.files[0]})}}),Object(s.jsx)("span",{className:"register-item__upload",children:"Upload image"}),Object(s.jsx)("span",{className:"register-item__max",children:"max file size 2mb"})]})]}),Object(s.jsxs)("label",{className:"label label__tag-id",children:[Object(s.jsx)("span",{children:"Tag ID"}),Object(s.jsx)("input",{className:r?"input register-item__input-id register-item__input-id--active":"input register-item__input-id",type:"text",maxLength:"6",name:"tagId",value:u,onChange:k}),l&&Object(s.jsx)("span",{className:"register-item__message",children:l})]}),Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"Item Name"}),Object(s.jsx)("input",{className:"input register-item__input",type:"text",name:"tagName",value:m,onChange:k})]}),Object(s.jsx)("button",{disabled:!r,className:"button register-item__btn",type:"button",onClick:function(){console.log(o),1===o&&n({field:"currentStep",value:2})},children:"Next"})]})]}),2===o&&Object(s.jsxs)("section",{className:"create-account",children:[Object(s.jsxs)("span",{className:"steps",children:[" step ",o," / 2 "]}),Object(s.jsx)("span",{className:"title",children:" Create Account "}),Object(s.jsx)("span",{className:"register-item__subtitle",children:" Add personal details about you "}),Object(s.jsxs)("form",{className:"create-account__form",action:"#",autoComplete:"off",children:[Object(s.jsxs)("div",{className:"create-account__name",children:[Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"First Name"}),Object(s.jsx)("input",{required:"required",className:"input create-account__input",type:"text",name:"firstName",value:p,onChange:k})]}),Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"Last Name"}),Object(s.jsx)("input",{required:"required",className:"input create-account__input",type:"text",name:"lastName",value:O,onChange:k})]}),Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"Phone Number"}),Object(s.jsx)("input",{required:"required",className:"input create-account__input",type:"tel",name:"phone",value:x,onChange:k})]}),Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"Email Address"}),Object(s.jsx)("input",{required:"required",className:"input create-account__input",type:"email",name:"email",value:g,onChange:k})]})]}),Object(s.jsxs)("div",{className:"create-account__location",children:[Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"Address"}),Object(s.jsx)("input",{className:"input create-account__input--address",type:"text",name:"address",value:_,onChange:k})]}),Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"City"}),Object(s.jsx)("input",{className:"input create-account__input",type:"text",name:"city",value:N,onChange:k})]}),Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"State"}),Object(s.jsx)("input",{className:"input create-account__input",type:"text",name:"userState",value:C,onChange:k})]}),Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"Country"}),Object(s.jsx)("input",{className:"input create-account__input",type:"text",name:"country",value:v,onChange:k})]}),Object(s.jsxs)("label",{className:"label",children:[Object(s.jsx)("span",{children:"ZIP code"}),Object(s.jsx)("input",{className:"input create-account__input",type:"text",name:"zipCode",value:y,onChange:k})]})]}),Object(s.jsxs)("div",{className:"create-account__bottom",children:[Object(s.jsx)("button",{className:"button create-account__btn",type:"submit",onClick:function(e){e.preventDefault(),f(u,m,h,p,O,x,g,_,N,v,y,C).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.error(e)}))},children:"Signup & Register"}),Object(s.jsxs)("span",{className:"create-account__login",children:["Already have an account? ",Object(s.jsx)(i.b,{to:"/login",children:"Login"})]})]})]})]}),Object(s.jsx)("div",{className:"go-home",children:Object(s.jsx)(i.b,{className:"go-home__link",to:"/",children:"Cancel and back to home"})})]})},q=a(22),D=function(e){var t=e.component,a=Object(q.a)(e,["component"]),c=O(),n=Object(j.a)(c,1)[0];return Object(s.jsx)(o.b,Object(I.a)(Object(I.a)({},a),{},{render:function(e){return n?Object(s.jsx)(t,Object(I.a)({},e)):Object(s.jsx)(o.a,{to:"/login"})}}))};a(41);var E=function(){return Object(s.jsxs)(i.a,{children:[Object(s.jsx)(N,{}),Object(s.jsx)("main",{className:"main",children:Object(s.jsxs)(o.d,{children:[Object(s.jsx)(o.b,{path:"/login",children:Object(s.jsx)(y,{})}),Object(s.jsx)(o.b,{path:"/register_tag",children:Object(s.jsx)(A,{})}),Object(s.jsx)(o.b,{path:"/auth/set-password/:token",children:Object(s.jsx)(k,{})}),Object(s.jsx)(D,{path:"/dashboard",component:C}),Object(s.jsx)(o.b,{path:"/",children:Object(s.jsx)(v,{})})]})})]})};r.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(E,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.a1a0a525.chunk.js.map